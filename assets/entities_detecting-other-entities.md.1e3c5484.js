import{r as n,o as s,c as a,a as t,w as e,d as p,b as o}from"./404.md.4672a8a4.js";const r='{"title":"Detecting Other Entities","description":"","frontmatter":{"title":"Detecting Other Entities","tags":["intermediate"]},"headers":[{"level":2,"title":"Using `minecraft:entity_sensor`","slug":"using-minecraft-entity-sensor"},{"level":2,"title":"Using BP Animations & Animation Controllers","slug":"using-bp-animations-animation-controllers"}],"relativePath":"entities/detecting-other-entities.md","lastUpdated":1636911091850}',l={},i=p('<p>You might have thought about making your entities fire an event when other entities are nearby. This article details the various known ways to do so.</p><h2 id="using-minecraft-entity-sensor"><a class="header-anchor" href="#using-minecraft-entity-sensor" aria-hidden="true">#</a> Using <code>minecraft:entity_sensor</code></h2><p>This is probably the most basic way to detect other entities. The main issues is it only accepts one entry and testing if the entity is out of range can be very tricky. Because it&#39;s an entity component, you can just place into your entity behavior file and edit the Minecraft filters. Here&#39;s a demonstration:</p><div class="language-json line-numbers-mode"><pre><code><span class="token property">&quot;minecraft:entity_sensor&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;sensor_range&quot;</span><span class="token operator">:</span> <span class="token number">2.5</span><span class="token punctuation">,</span> <span class="token comment">//this is for the radius in blocks it will detect other entities in</span>\n    <span class="token property">&quot;relative_range&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//if true, the sensor range is additive on top of the entity&#39;s hitbox size</span>\n    <span class="token property">&quot;require_all&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//if true, all nearby entities must pass the filter conditions for the event to send</span>\n    <span class="token property">&quot;minimum_count&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">//minimum amount of entities required for the event to fire. by default, it&#39;s 1</span>\n    <span class="token property">&quot;maximum_count&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token comment">//maximum amount of entities required for the event to fire. by default it&#39;s -1, which means infinity</span>\n    <span class="token property">&quot;event_filters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//you can put any filter you want here, the one that&#39;s being used in this example just detects players</span>\n        <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;is_family&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;subject&quot;</span><span class="token operator">:</span> <span class="token string">&quot;other&quot;</span><span class="token punctuation">,</span>\n        <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;player&quot;</span>\n    <span class="token punctuation">}</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;event&quot;</span><span class="token operator">:</span> <span class="token string">&quot;event:on_player_detected&quot;</span> <span class="token comment">//the event that fires when all the conditions in event_filters are met</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="using-bp-animations-animation-controllers"><a class="header-anchor" href="#using-bp-animations-animation-controllers" aria-hidden="true">#</a> Using BP Animations &amp; Animation Controllers</h2><p>The <code>for_each</code> function and <code>query.get_nearby_entities</code> or <code>query.get_nearby_entities_except_self</code> can also be used for detecting other entities. They are more effective than using <code>minecraft:entity_sensor</code> because they are better at detecting if the entity you want to detect goes away than with <code>minecraft:entity_sensor</code>. The only downside is that they&#39;re experimental.</p><p>This example you&#39;ll be following will make pigs say &quot;oink oink&quot; upon detecting players, though you can replace those with whatever you want. First of all, copy-paste this BP animation:</p>',7),c=o("BP/animations/detection_animation.json"),u=p('<div class="language-json line-numbers-mode"><pre><code><span class="token punctuation">{</span>\n\t<span class="token property">&quot;format_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.10.0&quot;</span><span class="token punctuation">,</span>\n\t<span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t<span class="token property">&quot;animation.pig.find_player&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t<span class="token property">&quot;animation_length&quot;</span><span class="token operator">:</span> <span class="token number">0.05</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">&quot;timeline&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token property">&quot;300&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t<span class="token string">&quot;v.x = 0.0; for_each(t.player, query.get_nearby_entities_except_self(16, &#39;minecraft:player&#39;), { v.x = v.x + 1; }); return v.x &gt; 0.0;&quot;</span>\n\t\t\t\t<span class="token punctuation">]</span>\n\t\t\t<span class="token punctuation">}</span>\n\t\t<span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>The first parameter that <code>query.get_nearby_entities_except_self</code> needs to work is the radius in blocks it will detect other entities in. The other is the identifier of the mob you want to make it detect.</p><p>Now that&#39;s good and all, but on the off chance, you want to make the pig detect players with some attribute that can be detected with MoLang, use this.</p>',3),b=o("BP/animations/detection_animation.json"),k=p('<div class="language-json line-numbers-mode"><pre><code><span class="token punctuation">{</span>\n\t<span class="token property">&quot;format_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.10.0&quot;</span><span class="token punctuation">,</span>\n\t<span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t<span class="token property">&quot;animation.pig.find_player&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t<span class="token property">&quot;animation_length&quot;</span><span class="token operator">:</span> <span class="token number">0.05</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">&quot;loop&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n\t\t\t<span class="token property">&quot;timeline&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t\t\t\t<span class="token property">&quot;300&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t\t\t\t\t<span class="token string">&quot;v.x = 0.0; for_each(t.player, query.get_nearby_entities_except_self(2, &#39;minecraft:player&#39;), { v.x = v.x + (t.player -&gt; query.is_sheared); }); return v.x &gt; 0.0;&quot;</span>\n\t\t\t\t<span class="token punctuation">]</span>\n\t\t\t<span class="token punctuation">}</span>\n\t\t<span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Next of all, copy paste this BP animation controller:</p>',2),m=o("BP/animation_controllers/pig_animation_controllers.json"),d=p('<div class="language-json line-numbers-mode"><pre><code><span class="token punctuation">{</span>\n    <span class="token property">&quot;format_version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.10.0&quot;</span><span class="token punctuation">,</span>\n    <span class="token property">&quot;animation_controllers&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n        <span class="token property">&quot;controller.animation.pig_find_player&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n            <span class="token property">&quot;initial_state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;default&quot;</span><span class="token punctuation">,</span>\n            <span class="token property">&quot;states&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n                <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n                    <span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token string">&quot;find_player&quot;</span>\n                    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n                    <span class="token property">&quot;transitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token punctuation">{</span>\n                            <span class="token property">&quot;detected&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v.x &gt; 0&quot;</span>\n                        <span class="token punctuation">}</span>\n                    <span class="token punctuation">]</span>\n                <span class="token punctuation">}</span><span class="token punctuation">,</span>\n                <span class="token property">&quot;detected&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n                    <span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token string">&quot;find_player&quot;</span>\n                    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n                    <span class="token property">&quot;transitions&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token punctuation">{</span>\n                            <span class="token property">&quot;default&quot;</span><span class="token operator">:</span> <span class="token string">&quot;v.x &lt;= 0&quot;</span>\n                        <span class="token punctuation">}</span>\n                    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n                    <span class="token property">&quot;on_entry&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n                        <span class="token string">&quot;/say oink oink&quot;</span>\n                    <span class="token punctuation">]</span>\n                <span class="token punctuation">}</span>\n            <span class="token punctuation">}</span>\n        <span class="token punctuation">}</span>\n    <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>Finally, copy-paste this snippet into the behavior file for the pig-like so. Make sure to insert this in <code>description</code>.</p><div class="language-json line-numbers-mode"><pre><code><span class="token property">&quot;animations&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n\t<span class="token property">&quot;no_find_player&quot;</span><span class="token operator">:</span> <span class="token string">&quot;controller.animation.pig_find_player&quot;</span><span class="token punctuation">,</span>\n\t<span class="token property">&quot;find_player&quot;</span><span class="token operator">:</span> <span class="token string">&quot;animation.pig.find_player&quot;</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">&quot;animate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n\t    <span class="token string">&quot;no_find_player&quot;</span>\n\t<span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div>',3);l.render=function(p,o,r,l,q,y){const _=n("CodeHeader");return s(),a("div",null,[i,t(_,null,{default:e((()=>[c])),_:1}),u,t(_,null,{default:e((()=>[b])),_:1}),k,t(_,null,{default:e((()=>[m])),_:1}),d])};export default l;export{r as __pageData};
