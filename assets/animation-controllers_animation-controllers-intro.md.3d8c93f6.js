import{r as n,o as t,c as a,a as s,w as e,b as l}from"./404.md.5cf8d662.js";const o='{"title":"Intro to Animation Controllers","description":"","frontmatter":{"title":"Intro to Animation Controllers","nav_order":1,"tags":["guide"]},"headers":[{"level":2,"title":"What are State Machines?","slug":"what-are-state-machines"},{"level":2,"title":"State Machine example","slug":"state-machine-example"},{"level":2,"title":"What are Animation Controllers?","slug":"what-are-animation-controllers"},{"level":3,"title":"Attaching our controller to an entity","slug":"attaching-our-controller-to-an-entity"},{"level":3,"title":"RP Animation Controllers","slug":"rp-animation-controllers"},{"level":3,"title":"BP Animation Controllers","slug":"bp-animation-controllers"},{"level":2,"title":"Animation Controller example","slug":"animation-controller-example"},{"level":3,"title":"Simple Example","slug":"simple-example"},{"level":3,"title":"Full Example","slug":"full-example"},{"level":2,"title":"BP Animation Controllers","slug":"bp-animation-controllers-1"},{"level":2,"title":"Animation Controller Flow","slug":"animation-controller-flow"},{"level":3,"title":"Loading","slug":"loading"},{"level":3,"title":"Resetting","slug":"resetting"}],"relativePath":"animation-controllers/animation-controllers-intro.md","lastUpdated":1629397664900}',r={},i=s("p",null,'Animation controllers (AC) are state-machines that can be used in both the resource pack, and the behavior pack. In the resource pack, animation controllers (RPAC) are used to play animations, and in the behavior pack (BPAC), they are used to play commands, and command "animations".',-1),p=s("h2",{id:"what-are-state-machines"},[s("a",{class:"header-anchor",href:"#what-are-state-machines","aria-hidden":"true"},"#"),l(" What are State Machines?")],-1),c=s("p",null,"State machines are a special kind of logic management, that relies on a series of states. Each state has two properties:",-1),u=s("ul",null,[s("li",null,"What to do in the current state"),s("li",null,"How to move to other states")],-1),m=s("p",null,[l("State machines are used all over the place, especially in classical programming. They aren't only found in minecraft! "),s("a",{href:"https://www.itemis.com/en/yakindu/state-machine/documentation/user-guide/overview_what_are_state_machines",target:"_blank",rel:"noopener noreferrer"},"You can learn more about state machines here"),l(".")],-1),h=s("p",null,[l("A state machine can only be "),s("code",null,"in"),l(' one state at a time. When a state machine "runs", you can think of it as moving from state to state, executing the logic inside, and then following '),s("code",null,"transitions"),l(" to other states.")],-1),b=s("h2",{id:"state-machine-example"},[s("a",{class:"header-anchor",href:"#state-machine-example","aria-hidden":"true"},"#"),l(" State Machine example")],-1),d=s("p",null,[l("The reason that state-machines are useful, is they allow us to naturally break up our animations into a logical flow, where each state handles its own animations "),s("em",null,"and"),l(" its own logic.")],-1),k=s("p",null,"For example, imagine you want to animate the spinning blade of a helicopter -but only when on the ground. You have two states:",-1),g=s("ul",null,[s("li",null,[s("code",null,"ground state")]),s("li",null,[s("code",null,"flying state")])],-1),y=s("p",null,"We can annotate these states with the two pieces of information described above:",-1),f=s("ul",null,[s("li",null,[s("code",null,"ground state"),l(": "),s("ul",null,[s("li",null,"play no animation"),s("li",null,[l("move to "),s("code",null,"flying state"),l(" if in the air")])])]),s("li",null,[s("code",null,"flying state"),l(": "),s("ul",null,[s("li",null,"play flying animation"),s("li",null,[l("move to "),s("code",null,"ground state"),l(" if on the ground")])])])],-1),w=s("p",null,"Here is the state-machine, visualized as a flow-chart:",-1),v=s("p",null,[s("img",{src:"/assets/images/concepts/animation-controllers/two_state_FSM.png",alt:""})],-1),_=s("p",null,[l("In this flowchart, states are represented by rectangles, and arrows represent "),s("em",null,"transitions"),l(" from one state to another.")],-1),x=s("p",null,[l("Flowcharts are a nice way to visualize multi-state finite-state-machines, is it allows you to follow the logical "),s("em",null,"flow"),l(" of the animation. Let us look at a more detailed example, which adds a third "),s("code",null,"explode"),l(" state:")],-1),A=s("p",null,[s("img",{src:"/assets/images/concepts/animation-controllers/three_state_FSM.png",alt:""})],-1),C=s("p",null,"As you can see, states can go to more than one state at once. States can also be dead-ends (since the helicopter is dead, and doesn't need further animation). The branching flow of animation-controllers is a large part of what makes them powerful.",-1),P=s("h2",{id:"what-are-animation-controllers"},[s("a",{class:"header-anchor",href:"#what-are-animation-controllers","aria-hidden":"true"},"#"),l(" What are Animation Controllers?")],-1),I=s("p",null,[l("Animation Controllers are Minecraft state machines that allow us to play animations and run commands. Animation controllers always go under the "),s("code",null,"animation_controllers"),l(" folder, in either the RP, or the BP.")],-1),R=s("h3",{id:"attaching-our-controller-to-an-entity"},[s("a",{class:"header-anchor",href:"#attaching-our-controller-to-an-entity","aria-hidden":"true"},"#"),l(" Attaching our controller to an entity")],-1),S=s("p",null,'Animation controller are defined in their own files, and must be "attached" to entities before they can do anything. To attach an AC into your entity, you must do two things:',-1),j=s("ul",null,[s("li",null,"Define a short-name for the animation controller"),s("li",null,[l("Run the animation controller via "),s("code",null,"scripts")])],-1),T=s("p",null,[l("Here is a sample "),s("code",null,"description"),l(", which shows how the AC can first be defined in "),s("code",null,"animations"),l(", and then played in "),s("code",null,"scripts/animate"),l(".")],-1),q=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"description"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t"),s("span",{class:"token property"},'"identifier"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"wiki:helicopter"'),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t"),s("span",{class:"token property"},'"blade_controller"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"controller.animation.helicopter.blade"'),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token property"},'"scripts"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t"),s("span",{class:"token property"},'"animate"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t"),s("span",{class:"token string"},'"blade_controller"'),l("\n\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t"),s("span",{class:"token punctuation"},"}"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br")])],-1),M=s("p",null,"If you want to conditionally play an animation controller, you can supply an optional molang argument. If the argument evaluates to true, the controller will play:",-1),B=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"scripts"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t"),s("span",{class:"token property"},'"animate"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t"),s("span",{class:"token comment"},"// Only play the blade_controller if the helicopter has a rider."),l("\n\t\t\t"),s("span",{class:"token property"},'"blade_controller"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"query.has_rider"'),l("\n\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t"),s("span",{class:"token punctuation"},"]"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br")])],-1),W=s("h3",{id:"rp-animation-controllers"},[s("a",{class:"header-anchor",href:"#rp-animation-controllers","aria-hidden":"true"},"#"),l(" RP Animation Controllers")],-1),F=s("p",null,"RP animation controllers go in the RP, and can be attached to RP entities. They allow you to play bone-animations.",-1),H=s("h3",{id:"bp-animation-controllers"},[s("a",{class:"header-anchor",href:"#bp-animation-controllers","aria-hidden":"true"},"#"),l(" BP Animation Controllers")],-1),E=s("p",null,"BP animation controllers go in the BP, and can be attached to BP entities. They allow you to play commands.",-1),L=s("h2",{id:"animation-controller-example"},[s("a",{class:"header-anchor",href:"#animation-controller-example","aria-hidden":"true"},"#"),l(" Animation Controller example")],-1),Y=s("p",null,"Lets look at a simple animation controller from our State Machine example above:",-1),z=s("h3",{id:"simple-example"},[s("a",{class:"header-anchor",href:"#simple-example","aria-hidden":"true"},"#"),l(" Simple Example")],-1),O=l("RP/animation_controllers/helicopter.ac.json"),U=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),l("\n\t"),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"1.10.0"'),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token property"},'"animation_controllers"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t"),s("span",{class:"token property"},'"controller.animation.helicopter.blade"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t"),s("span",{class:"token property"},'"initial_state"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"ground"'),s("span",{class:"token punctuation"},","),l("\n\t\t\t"),s("span",{class:"token property"},'"states"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},'"flying"'),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t"),s("span",{class:"token punctuation"},"}"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br")])],-1),D=s("p",null,"There is... a lot going on here. Lets break it down, step by step. As we do so, remember two things:",-1),N=s("ul",null,[s("li",null,[l("Animation controllers are a "),s("em",null,"list of states")]),s("li",null,[l("Each state contains two pieces of information: "),s("em",null,"What to do in any given state"),l(", and "),s("em",null,"How to transition to new states"),l(".")])],-1),X=s("p",null,"So this particular example contains two states:",-1),G=s("ul",null,[s("li",null,[s("code",null,"ground")]),s("li",null,[s("code",null,"flying")])],-1),J=s("p",null,[l("You can note that "),s("code",null,'"initial_state": "ground"'),l(" means that our Animation Controller will begin in the "),s("code",null,"ground"),l(" state.")],-1),K=l("RP/animation_controllers/helicopter.ac.json#animation_controllers/controller.animation.helicopter/states"),Q=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n        "),s("span",{class:"token punctuation"},"{"),l("\n            "),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_on_ground"'),l("\n        "),s("span",{class:"token punctuation"},"}"),l("\n    "),s("span",{class:"token punctuation"},"]"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br")])],-1),V=s("p",null,[l("The "),s("code",null,"ground"),l(" state contains a list of "),s("em",null,"transitions"),l(", which is how we get to other states. In this example, the default state is saying: "),s("em",null,[l("Move to the "),s("code",null,"flying"),l(" state when "),s("code",null,"query.is_on_ground"),l(" is NOT true")]),l(". In other words -start the flying animation when we fly into the air!")],-1),Z=l("RP/animation_controllers/helicopter.ac.json#animation_controllers/controller.animation.helicopter/states"),$=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n    "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n        "),s("span",{class:"token string"},'"flying"'),l("\n    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),l("\n    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n        "),s("span",{class:"token punctuation"},"{"),l("\n            "),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"query.is_on_ground"'),l("\n        "),s("span",{class:"token punctuation"},"}"),l("\n    "),s("span",{class:"token punctuation"},"]"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br")])],-1),nn=s("p",null,[l("The "),s("code",null,"flying"),l(" state also contains a list of transitions. In this case it contains the opposite transition: "),s("em",null,[l("Move to the "),s("code",null,"ground"),l(" state when "),s("code",null,"query.is_on_ground"),l(" is true")]),l(". In other words -move back to the default state when we land on the ground!")],-1),tn=s("p",null,[l("Alongside the "),s("code",null,"transition"),l(" list, there is also a list of "),s("code",null,"animations"),l(" to play while inside of this state. In this case, playing the "),s("code",null,"flying"),l(" animation. This animation will need to be defined in the entity definition file for this entity.")],-1),an=s("h3",{id:"full-example"},[s("a",{class:"header-anchor",href:"#full-example","aria-hidden":"true"},"#"),l(" Full Example")],-1),sn=s("p",null,"Here is the code for the second state machine from above, with three states this time. This example illustrates a few new concepts:",-1),en=s("ul",null,[s("li",null,"States with multiple transitions"),s("li",null,"States with no transitions")],-1),ln=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),l("\n\t"),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"1.10.0"'),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token property"},'"animation_controllers"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t"),s("span",{class:"token property"},'"controller.animation.helicopter.blade"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t"),s("span",{class:"token property"},'"initial_state"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"ground"'),s("span",{class:"token punctuation"},","),l("\n\t\t\t"),s("span",{class:"token property"},'"states"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"explode"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_alive"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},'"flying"'),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"explode"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_alive"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t"),s("span",{class:"token property"},'"explode"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},'"explode"'),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t"),s("span",{class:"token punctuation"},"}"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br")])],-1),on=s("h2",{id:"bp-animation-controllers-1"},[s("a",{class:"header-anchor",href:"#bp-animation-controllers-1","aria-hidden":"true"},"#"),l(" BP Animation Controllers")],-1),rn=s("p",null,"Behavior Pack animation controllers use the same general format as RP Animation Controllers, except instead of triggering animations, they allow you to trigger commands. In general, they introduce two new fields:",-1),pn=s("ul",null,[s("li",null,[s("code",null,"on_entry"),l(": Commands to play when the state is entered")]),s("li",null,[s("code",null,"on_exit"),l(": Commands to play when the state is exited")])],-1),cn=s("p",null,"Commands in this context mean three distinct things:",-1),un=s("ul",null,[s("li",null,[l("A slash command, such as "),s("code",null,"/say Hello there!")]),s("li",null,[l("An event trigger, on the entity, such as: "),s("code",null,"@s wiki:transform_into_plane")]),s("li",null,[l("An arbitrary molang expression, such as "),s("code",null,"variable.tickets += 1;")])],-1),mn=s("p",null,"Here is an example BP animation controller, which exhibits some of this behavior:",-1),hn=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),l("\n\t"),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"1.10.0"'),s("span",{class:"token punctuation"},","),l("\n\t"),s("span",{class:"token property"},'"animation_controllers"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t"),s("span",{class:"token property"},'"controller.animation.helicopter.commands"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t"),s("span",{class:"token property"},'"initial_state"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"ground"'),s("span",{class:"token punctuation"},","),l("\n\t\t\t"),s("span",{class:"token property"},'"states"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"on_entry"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},'"/say I am now in the ground!"'),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"!query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t"),s("span",{class:"token property"},'"flying"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"on_entry"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),s("span",{class:"token string"},'"/say I am now in the air!"'),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),l("\n\t\t\t\t\t"),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token punctuation"},"["),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"{"),l("\n\t\t\t\t\t\t\t"),s("span",{class:"token property"},'"ground"'),s("span",{class:"token operator"},":"),l(),s("span",{class:"token string"},'"query.is_on_ground"'),l("\n\t\t\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t\t\t"),s("span",{class:"token punctuation"},"]"),l("\n\t\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t\t"),s("span",{class:"token punctuation"},"}"),l("\n\t"),s("span",{class:"token punctuation"},"}"),l("\n"),s("span",{class:"token punctuation"},"}"),l("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br")])],-1),bn=s("h2",{id:"animation-controller-flow"},[s("a",{class:"header-anchor",href:"#animation-controller-flow","aria-hidden":"true"},"#"),l(" Animation Controller Flow")],-1),dn=s("p",null,"Through the examples, hopefully you are starting to get some concept for how animation controller flow works. In this section, I will explain it more explicitly.",-1),kn=s("h3",{id:"loading"},[s("a",{class:"header-anchor",href:"#loading","aria-hidden":"true"},"#"),l(" Loading")],-1),gn=s("p",null,[l("When an entity loads into the world, it will "),s("em",null,"enter"),l(" the default animation controller state, in each of its attached animation controllers. If no "),s("code",null,"default_state"),l(" is defined, the state named "),s("code",null,"default"),l(" is used. If this is missing, the AC will generate a content log.")],-1),yn=s("p",null,"When running, the AC will do the following things each tick:",-1),fn=s("ol",null,[s("li",null,[l("Run any animations in the current state (will loop if set to loop, otherwise it will just play once). Run any commands in "),s("code",null,"on_entry"),l(", the state was just entered.")]),s("li",null,[l("Check all transitions to see if there is any valid transition. Search from the top to the bottom of the list, and move to the first valid transition. If a transition is found, "),s("code",null,"on_exit"),l(" commands will be played.")])],-1),wn=s("p",null,"Because of the way animation controllers are setup, it will only move from state to state at a MAXIMUM of once per tick.",-1),vn=s("h3",{id:"resetting"},[s("a",{class:"header-anchor",href:"#resetting","aria-hidden":"true"},"#"),l(" Resetting")],-1),_n=s("p",null,'Animation Controllers "reset" when an entity reloads (player join/leave, chunk reload, etc). This means that it will "jump" back to the default state. You should always have logic in your default state that can handle restarting any critical animations.',-1);r.render=function(l,o,r,xn,An,Cn){const Pn=n("CodeHeader");return t(),a("div",null,[i,p,c,u,m,h,b,d,k,g,y,f,w,v,_,x,A,C,P,I,R,S,j,T,s(Pn),q,M,s(Pn),B,W,F,H,E,L,Y,z,s(Pn,null,{default:e((()=>[O])),_:1}),U,D,N,X,G,J,s(Pn,null,{default:e((()=>[K])),_:1}),Q,V,s(Pn,null,{default:e((()=>[Z])),_:1}),$,nn,tn,an,sn,en,s(Pn),ln,on,rn,pn,cn,un,mn,s(Pn),hn,bn,dn,kn,gn,yn,fn,wn,vn,_n])};export default r;export{o as __pageData};
