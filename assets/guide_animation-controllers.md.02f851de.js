import{o as n,c as a,b as s,d as e}from"./app.f7e7c0c6.js";const t='{"title":"Animation Controllers","description":"","frontmatter":{"layout":"guide","title":"Animation Controllers","parent":"Beginners Guide","nav_order":10,"badge":10,"badge_color":"guide","badge_justification":"left"},"headers":[{"level":2,"title":"Attack Animation","slug":"attack-animation"},{"level":2,"title":"Animation Controller","slug":"animation-controller"},{"level":2,"title":"Resource and Behavior file edits","slug":"resource-and-behavior-file-edits"},{"level":2,"title":"Behavior Animation","slug":"behavior-animation"},{"level":2,"title":"Behavior Animation Controller","slug":"behavior-animation-controller"},{"level":2,"title":"Defining behavior animation Shortnames in the Behavior file","slug":"defining-behavior-animation-shortnames-in-the-behavior-file"}],"relativePath":"guide/animation-controllers.md","lastUpdated":1617487001307}',o={},l=s("h1",{id:"animation-controllers-giving-our-entity-an-attack-animation"},[s("a",{class:"header-anchor",href:"#animation-controllers-giving-our-entity-an-attack-animation","aria-hidden":"true"},"#"),e(" Animation controllers: giving our entity an attack animation")],-1),r=s("h2",{id:"attack-animation"},[s("a",{class:"header-anchor",href:"#attack-animation","aria-hidden":"true"},"#"),e(" Attack Animation")],-1),i=s("p",null,[e("First, let's create the animation itself in Blockbench. Choose "),s("em",null,"File>Open Model>yourModelFile"),e(" and choose the "),s("em",null,"Animation"),e(' workspace in the top right corner. Now, unlike the walk animation we already created, our attack animation will consist of a single frame, because Animation Controllers have a "transitions" feature that blends two following animations smoothly. After you\'re done, name your animation '),s("code",null,"animation.entityname.attack"),e(", choose "),s("em",null,"Export Animations"),e(" and replace your old animations file in "),s("code",null,"RP/animations"),e(". "),s("em",null,[e("Note: you can find Animations documented on "),s("a",{href:"https://bedrock.dev/r/MoLang",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev/r/MoLang"),e(" and "),s("a",{href:"https://bedrock.dev/r/Animations",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev/r/Animations"),e(". For Behavior Animations, refer to "),s("a",{href:"https://bedrock.dev/r/Entity%20Events",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev/r/Entity Events"),e(".")])],-1),p=s("p",null,[s("img",{src:"/bedrock-wiki-vite/assets/images/guide/animation_controllers_1.png",alt:""}),e(" As you see, the attack frame is created fully under the keyframe '0'.")],-1),c=s("p",null,"Now for the actual",-1),u=s("h2",{id:"animation-controller"},[s("a",{class:"header-anchor",href:"#animation-controller","aria-hidden":"true"},"#"),e(" Animation Controller")],-1),m=s("p",null,[e("Create "),s("code",null,"RP/animation_controllers/entityName.animation.controller.json"),e(". Let's go over the overall structure of an animation controller.")],-1),k=s("p",null,[s("img",{src:"/bedrock-wiki-vite/assets/images/guide/animation_controllers_2.png",alt:""})],-1),b=s("ul",null,[s("li",null,[e("The animation controller's identifier is "),s("code",null,"controller.animation.skele_yaklin.attack"),e(" We'll define it in the "),s("em",null,".entity"),e(" file like a normal animation.")]),s("li",null,[e("Animation controllers are "),s("strong",null,"State Machines"),e(", which means they work on states. Every state is unique, but they can transition between each other.")]),s("li",null,'"initial_state" defines the state that the entity will spawn with;'),s("li",null,'"states": {} includes every state\'s object.')],-1),h=s("p",null,"Let's go through the states themselves.",-1),d=s("p",null,[s("code",null,"RP//animation_controllers/skele_yaklin.controller.animation.json")],-1),y=s("p",null,'{% include filepath.html path="RP/animation_controllers/skele_yaklin.ac.json"%}',-1),f=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"1.10.0"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"animation_controllers"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"controller.animation.skele_yaklin.attack"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n            "),s("span",{class:"token property"},'"initial_state"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"default_state"'),s("span",{class:"token punctuation"},","),e("\n            "),s("span",{class:"token property"},'"states"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                "),s("span",{class:"token property"},'"default_state"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                    "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token punctuation"},"{"),e("\n                            "),s("span",{class:"token property"},'"walk"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"query.modified_move_speed"'),e("\n                        "),s("span",{class:"token punctuation"},"}"),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token punctuation"},"{"),e("\n                            "),s("span",{class:"token property"},'"attack_state"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"variable.attack_time > 0"'),e("\n                        "),s("span",{class:"token punctuation"},"}"),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"blend_transition"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"0.1"),e("\n                "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n                "),s("span",{class:"token property"},'"attack_state"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                    "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token string"},'"attack"'),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token punctuation"},"{"),e("\n                            "),s("span",{class:"token property"},'"default_state"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"variable.attack_time == 0"'),e("\n                        "),s("span",{class:"token punctuation"},"}"),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"blend_transition"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"0.1"),e("\n                "),s("span",{class:"token punctuation"},"}"),e("\n            "),s("span",{class:"token punctuation"},"}"),e("\n        "),s("span",{class:"token punctuation"},"}"),e("\n    "),s("span",{class:"token punctuation"},"}"),e("\n"),s("span",{class:"token punctuation"},"}"),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br")])],-1),g=s("p",null,'The "default_state":',-1),v=s("ul",null,[s("li",null,[e('The "animations" array includes all animations the same way as "scripts/animate" in the .entity file. If you put an animation shortname like this "walk", the animation will play all the time during which the state is applied. Here we moved '),s("code",null,'{ "walk": "query.modified_move_speed" }'),e(' from ".entity/scripts/animate", which means that if the state is currently applied AND the entity is moving, the walk animation will play.')]),s("li",null,[e('The "transitions" array controls in which state the current state can transit in. For example, in this scenario, if '),s("code",null,"variable.attack_time > 0"),e(' turns true, the state will change from "default_state" to "attack_state".')])],-1),_=s("p",null,[s("em",null,[e("(You can see more about queries "),s("a",{href:"/guide/custom-entity-full.html"},"here"),e(", in the Resource Entity Definitions tutorial.)")])],-1),w=s("ul",null,[s("li",null,[s("code",null,'"blend_transition": 0.1'),e(" means that the states will transit between each other smoothly, resulting in a smooth visual blend.")]),s("li",null,'"attack_state" is very similar, with the exception that the animation, "attack", is run all the time the state is applied. The state transits back to default when attack time is 0 again, or, in other words, the entity no longer attacks.')],-1),A=s("ul",null,[s("li",null,"Note: The showcased animation controller is a great example of a resource animation controller, also being a great way to implement attack animations. There are some less efficient or much more complicated methods to achieve the same goal out there, but I've been using this one ever since I, myself, found out about it.*")],-1),j=s("h2",{id:"resource-and-behavior-file-edits"},[s("a",{class:"header-anchor",href:"#resource-and-behavior-file-edits","aria-hidden":"true"},"#"),e(" Resource and Behavior file edits")],-1),x=s("p",null,'{% include filepath.html path="RP/entity/skele_yaklin.entity.json" local_path="minecraft:client_entity/description"%}',-1),B=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"walk"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"animation.skele_yaklin.walk"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"attack"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"animation.skele_yaklin.attack"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"humanoid_big_head"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"animation.humanoid.big_head"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"look_at_target"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"animation.humanoid.look_at_target.default.v1.0"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"ctrl"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"controller.animation.skele_yaklin.attack"'),e("\n"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n"),s("span",{class:"token property"},'"scripts"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"animate"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n        "),s("span",{class:"token string"},'"ctrl"'),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token punctuation"},"{"),e("\n            "),s("span",{class:"token property"},'"humanoid_big_head"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"query.is_baby"'),e("\n        "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token string"},'"look_at_target"'),e("\n    "),s("span",{class:"token punctuation"},"]"),e("\n"),s("span",{class:"token punctuation"},"}"),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br")])],-1),T=s("p",null,"Now, let's define the animation controller and the attack animation in the .entity file. The animation controller shortname should be included in \"scripts/animate\", so it's active all the time.",-1),E=s("p",null,'{% include filepath.html path="BP/entities/skele_yaklin.json" local_path="minecraft:entity/components"%}',-1),P=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[e("  "),s("span",{class:"token comment"},"//make the entity attack back"),e("\n  "),s("span",{class:"token property"},'"minecraft:behavior.hurt_by_target"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"priority"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"1"),e("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n  "),s("span",{class:"token comment"},"//how much damage the entity deals"),e("\n  "),s("span",{class:"token property"},'"minecraft:attack"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"damage"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"6"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"effect_name"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"weakness"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"effect_duration"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"10"),e("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n  "),s("span",{class:"token comment"},"//attack AI type"),e("\n  "),s("span",{class:"token property"},'"minecraft:behavior.melee_attack"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"priority"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"3"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"speed_multiplier"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"1.1"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"track_target"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"false"),e("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n  "),s("span",{class:"token comment"},"//chose targets"),e("\n  "),s("span",{class:"token property"},'"minecraft:behavior.nearest_attackable_target"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"priority"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"within_radius"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"reselect_targets"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"entity_types"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n      "),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"filters"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n          "),s("span",{class:"token property"},'"any_of"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n            "),s("span",{class:"token punctuation"},"{"),e("\n              "),s("span",{class:"token property"},'"test"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"is_family"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"subject"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"other"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"value"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"endermite"'),e("\n            "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n            "),s("span",{class:"token punctuation"},"{"),e("\n              "),s("span",{class:"token property"},'"test"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"is_family"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"subject"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"other"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"value"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"silverfish"'),e("\n            "),s("span",{class:"token punctuation"},"}"),e("\n          "),s("span",{class:"token punctuation"},"]"),e("\n        "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token property"},'"max_dist"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"35"),e("\n      "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n      "),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"filters"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n          "),s("span",{class:"token property"},'"any_of"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n            "),s("span",{class:"token punctuation"},"{"),e("\n              "),s("span",{class:"token property"},'"test"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"is_family"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"subject"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"other"'),s("span",{class:"token punctuation"},","),e("\n              "),s("span",{class:"token property"},'"value"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"skeleton_horse"'),e("\n            "),s("span",{class:"token punctuation"},"}"),e("\n          "),s("span",{class:"token punctuation"},"]"),e("\n        "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token property"},'"max_dist"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"64"),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token property"},'"must_see"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"false"),e("\n      "),s("span",{class:"token punctuation"},"}"),e("\n    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"must_see"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"must_see_forget_duration"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"17"),e("\n  "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br"),s("span",{class:"line-number"},"35"),s("br"),s("span",{class:"line-number"},"36"),s("br"),s("span",{class:"line-number"},"37"),s("br"),s("span",{class:"line-number"},"38"),s("br"),s("span",{class:"line-number"},"39"),s("br"),s("span",{class:"line-number"},"40"),s("br"),s("span",{class:"line-number"},"41"),s("br"),s("span",{class:"line-number"},"42"),s("br"),s("span",{class:"line-number"},"43"),s("br"),s("span",{class:"line-number"},"44"),s("br"),s("span",{class:"line-number"},"45"),s("br"),s("span",{class:"line-number"},"46"),s("br"),s("span",{class:"line-number"},"47"),s("br"),s("span",{class:"line-number"},"48"),s("br"),s("span",{class:"line-number"},"49"),s("br"),s("span",{class:"line-number"},"50"),s("br"),s("span",{class:"line-number"},"51"),s("br"),s("span",{class:"line-number"},"52"),s("br"),s("span",{class:"line-number"},"53"),s("br"),s("span",{class:"line-number"},"54"),s("br"),s("span",{class:"line-number"},"55"),s("br"),s("span",{class:"line-number"},"56"),s("br")])],-1),q=s("p",null,"Lastly, let's give our entity the ability to attack. The needed components are:",-1),C=s("ul",null,[s("li",null,'"minecraft:nearest_attackable_target", which chooses the mobs the mob will attack'),s("li",null,'Attack AI: We\'ll use "minecraft:behavior.melee_attack" right now, you can see other attack AIs in the Vanilla Example behavior files.'),s("li",null,'"minecraft:hurt_by_target" makes the mob attack back any entity that hits it.'),s("li",null,'"minecraft:attack" defines the value of the damage the entity deals.')],-1),F=s("p",null,'I included these attributes in the "tut:wild" component group.',-1),I=s("hr",null,null,-1),R=s("h1",{id:"behavior-animations"},[s("a",{class:"header-anchor",href:"#behavior-animations","aria-hidden":"true"},"#"),e(" Behavior Animations")],-1),L=s("p",null,"Animations and animation controllers are typically defined in the Resource pack. However, there's a certain type of those files that are to be located in the Behavior pack. They are thus called Behavior- (or server- ) Animations.",-1),M=s("p",null,[e("Behavior animations are able to execute slash(/) commands and to trigger events from the entity behavior file.The syntax is similar to normal resource animations and animation controllers, which are used to run visual animations. Behavior Animations are located in "),s("code",null,"BP/animations/"),e(" and Behavior animation controllers in "),s("code",null,"BP/animation_controllers/"),e(". The file name is not important, but the animation identifiers are.")],-1),N=s("h2",{id:"behavior-animation"},[s("a",{class:"header-anchor",href:"#behavior-animation","aria-hidden":"true"},"#"),e(" Behavior Animation")],-1),Y=s("p",null,"Here's an example of a Behavior Animation that executes multiple slash commands on an entity.",-1),D=s("p",null,'{% include filepath.html path="BP/animations/misc.animation.json"%}',-1),H=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),e("\n  "),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"1.8.0"'),s("span",{class:"token punctuation"},","),e("\n  "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"animation.grufallo.revenge"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n      "),s("span",{class:"token property"},'"loop"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),e("\n      "),s("span",{class:"token property"},'"animation_length"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"1"),s("span",{class:"token punctuation"},","),e("\n      "),s("span",{class:"token property"},'"timeline"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n\t"),s("span",{class:"token property"},'"0.0"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n\t  "),s("span",{class:"token string"},'"/effect @p[c=1,r=4] fatal_poison 15 1"'),e("\n\t"),s("span",{class:"token punctuation"},"]"),e("\n      "),s("span",{class:"token punctuation"},"}"),e("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"animation.yaklin.on_summon"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n      "),s("span",{class:"token property"},'"loop"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),e("\n      "),s("span",{class:"token property"},'"animation_length"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token number"},"2"),s("span",{class:"token punctuation"},","),e("\n      "),s("span",{class:"token property"},'"timeline"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n\t"),s("span",{class:"token property"},'"0.0"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n\t  "),s("span",{class:"token string"},'"/say I\'ve been spawned!"'),e("\n\t"),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n        "),s("span",{class:"token property"},'"1.0"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"/say ...And managed to survive for a single second already"'),e("\n      "),s("span",{class:"token punctuation"},"}"),e("\n    "),s("span",{class:"token punctuation"},"}"),e("\n  "),s("span",{class:"token punctuation"},"}"),e("\n"),s("span",{class:"token punctuation"},"}"),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br")])],-1),W=s("p",null,'This animation file includes two animations: "animation.grufallo.revenge" and "animation.yaklin.on_summon".',-1),K=s("ul",null,[s("li",null,[e('When the animation is triggered, things happen based on the timeline. After "0.0" seconds has passed, the entity will execute the '),s("code",null,"/effect"),e(" command. "),s("em",null,'Note that after every keyframe (like "0.0", "2.0", etc) either a string with a single command or an array [], including multiple strings with commands, must stand.')]),s("li",null,[e("On the first tick of the animation the entity executes a "),s("code",null,"/say"),e(" command, and another one after 1 second. Note that slash commands can only be the ones that can be executed from chat.")])],-1),S=s("h2",{id:"behavior-animation-controller"},[s("a",{class:"header-anchor",href:"#behavior-animation-controller","aria-hidden":"true"},"#"),e(" Behavior Animation Controller")],-1),O=s("p",null,"Here's an example that can be used to track AFK players. (You can scroll the code box for better readability)",-1),G=s("p",null,'{% include filepath.html path="BP/animation_controllers/afk_controller.ac.json"%}',-1),J=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"format_version"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"1.10.0"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"animation_controllers"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"controller.animation.player.afk"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n            "),s("span",{class:"token property"},'"states"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                "),s("span",{class:"token property"},'"default"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token punctuation"},"{"),e("\n                            "),s("span",{class:"token property"},'"stands_still"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"!query.is_moving"'),e("\n                        "),s("span",{class:"token punctuation"},"}"),e("\n                    "),s("span",{class:"token punctuation"},"]"),e("\n                "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n                "),s("span",{class:"token property"},'"stands_still"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n                    "),s("span",{class:"token property"},'"on_entry"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token string"},'"/tag @s add AFK"'),s("span",{class:"token punctuation"},","),e("\n                        "),s("span",{class:"token string"},'"/say I\'m now AFK"'),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token string"},'"afk_animation"'),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"transitions"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token punctuation"},"{"),e("\n                            "),s("span",{class:"token property"},'"default"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"query.is_moving"'),e("\n                        "),s("span",{class:"token punctuation"},"}"),e("\n                    "),s("span",{class:"token punctuation"},"]"),s("span",{class:"token punctuation"},","),e("\n                    "),s("span",{class:"token property"},'"on_exit"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n                        "),s("span",{class:"token string"},'"/tag @s remove AFK"'),s("span",{class:"token punctuation"},","),e("\n                        "),s("span",{class:"token string"},'"/say I\'m no longer AFK"'),e("\n                    "),s("span",{class:"token punctuation"},"]"),e("\n                "),s("span",{class:"token punctuation"},"}"),e("\n            "),s("span",{class:"token punctuation"},"}"),e("\n        "),s("span",{class:"token punctuation"},"}"),e("\n    "),s("span",{class:"token punctuation"},"}"),e("\n"),s("span",{class:"token punctuation"},"}"),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br"),s("span",{class:"line-number"},"17"),s("br"),s("span",{class:"line-number"},"18"),s("br"),s("span",{class:"line-number"},"19"),s("br"),s("span",{class:"line-number"},"20"),s("br"),s("span",{class:"line-number"},"21"),s("br"),s("span",{class:"line-number"},"22"),s("br"),s("span",{class:"line-number"},"23"),s("br"),s("span",{class:"line-number"},"24"),s("br"),s("span",{class:"line-number"},"25"),s("br"),s("span",{class:"line-number"},"26"),s("br"),s("span",{class:"line-number"},"27"),s("br"),s("span",{class:"line-number"},"28"),s("br"),s("span",{class:"line-number"},"29"),s("br"),s("span",{class:"line-number"},"30"),s("br"),s("span",{class:"line-number"},"31"),s("br"),s("span",{class:"line-number"},"32"),s("br"),s("span",{class:"line-number"},"33"),s("br"),s("span",{class:"line-number"},"34"),s("br")])],-1),U=s("ul",null,[s("li",null,'"controller.animation.player.afk" is, of course, the identifier.'),s("li",null,[e("If the "),s("a",{href:"https://bedrock.dev/r/MoLang",target:"_blank",rel:"noopener noreferrer"},"Molang"),e(" query "),s("code",null,"!query.is_moving"),e(' returns false (the player isn\'t moving), the state transits to the "stand_still" state. (You can see more about queries '),s("a",{href:"/guide/custom-entity-full.html"},"here"),e(", in the Resource Entity Definitions tutorial.)")]),s("li",null,'When the state gets entered, "on_entry" gets triggered, which runs the following slash commands.'),s("li",null,[e('"animations" includes the Behavior Animation\'s shortname that is to be ran during the whole time the state is active, just like in '),s("a",{href:"#animation-controller"},"Resource Animation Controllers"),e(".")]),s("li",null,'If the player is moving again, the state will transit to "default" again. The commands "on_exit" will be executed.')],-1),V=s("p",null,[e("You can also trigger a behavior event "),s("em",null,'(defined in the entity behavior file>"events": {})'),e(' on the entity which runs the command. Here, on the "0.2" keyframe, the entity runs the '),s("code",null,"/tag"),e(" command and then runs the "),s("code",null,'"jdot:tagged_alt"'),e(" event, which removes or adds some component groups. For more info see the "),s("a",{href:"/guide/custom-entity-full.html"},"behavior events definitions page"),e(".")],-1),z=s("div",{class:"language-"},[s("pre",null,[s("code",null,'"0.2": [\n    "/tag @s add TAG",\n    "@s jdot:tagged_alt"\n]\n')]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br")])],-1),Q=s("h2",{id:"defining-behavior-animation-shortnames-in-the-behavior-file"},[s("a",{class:"header-anchor",href:"#defining-behavior-animation-shortnames-in-the-behavior-file","aria-hidden":"true"},"#"),e(" Defining behavior animation "),s("em",null,"Shortnames"),e(" in the Behavior file")],-1),X=s("p",null,[e('Just like resource animations and animation controllers, Behavior animations and animation controllers need to be assigned a shortname and called in "scripts>animate". For resource ones, it\'s done in the '),s("em",null,".entity"),e(" file "),s("code",null,"RP/entity/entityname.entity.json"),e(", but for behavior ones it's done directly in the entity behavior file: "),s("code",null,'BP/entities/entityname.json/"description: {}'),e('. (For more information on the behavior file and the "description" object see the '),s("a",{href:"/guide/custom-entity-full.html"},"Entity behavior definition page"),e(".")],-1),Z=s("p",null,"Here's an example:",-1),$=s("p",null,'{% include filepath.html path="BP/entities/grufallo.json" local_path="minecraft:client_entity"%}',-1),nn=s("div",{class:"language-json line-numbers-mode"},[s("pre",null,[s("code",null,[s("span",{class:"token property"},'"description"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n    "),s("span",{class:"token property"},'"identifier"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"jdot:grufallo"'),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"is_spawnable"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"is_summonable"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"true"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"is_experimental"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token boolean"},"false"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"animations"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"revenge"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"animation.grufallo.revenge"'),e("\n    "),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},","),e("\n    "),s("span",{class:"token property"},'"scripts"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"{"),e("\n        "),s("span",{class:"token property"},'"animate"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token punctuation"},"["),e("\n            "),s("span",{class:"token punctuation"},"{"),e("\n                "),s("span",{class:"token property"},'"revenge"'),s("span",{class:"token operator"},":"),e(),s("span",{class:"token string"},'"!query.is_alive"'),e("\n            "),s("span",{class:"token punctuation"},"}"),e("\n        "),s("span",{class:"token punctuation"},"]"),e("\n    "),s("span",{class:"token punctuation"},"}"),e("\n"),s("span",{class:"token punctuation"},"}"),e("\n")])]),s("div",{class:"line-numbers-wrapper"},[s("span",{class:"line-number"},"1"),s("br"),s("span",{class:"line-number"},"2"),s("br"),s("span",{class:"line-number"},"3"),s("br"),s("span",{class:"line-number"},"4"),s("br"),s("span",{class:"line-number"},"5"),s("br"),s("span",{class:"line-number"},"6"),s("br"),s("span",{class:"line-number"},"7"),s("br"),s("span",{class:"line-number"},"8"),s("br"),s("span",{class:"line-number"},"9"),s("br"),s("span",{class:"line-number"},"10"),s("br"),s("span",{class:"line-number"},"11"),s("br"),s("span",{class:"line-number"},"12"),s("br"),s("span",{class:"line-number"},"13"),s("br"),s("span",{class:"line-number"},"14"),s("br"),s("span",{class:"line-number"},"15"),s("br"),s("span",{class:"line-number"},"16"),s("br")])],-1),an=s("p",null,'The "description" object in a behavior file is where the entity\'s identifier and some configurations are stored. After the "is_experimental" config we added "animations" and `"scripts"/"animate", exactly like in an .entity file.',-1),sn=s("ul",null,[s("li",null,'"revenge" is the shortname for the animation with the id "animation.grufallo.revenge".'),s("li",null,[e('The animation with the shortname "revenge" gets ran if the entity isn\'t alive in scripts>animate, or, in other words, when the entity is dying, or, in other other words, when the query returns true. '),s("em",null,[e("( You can see more about queries in the "),s("a",{href:"/guide/custom-entity-full.html"},"Resource Entity Definitions tutorial"),e(" )")])]),s("li",null,"Animation controllers can be ran the same way as in the .entity resource file.")],-1),en=s("p",null,"You can find out more about animation controllers by checking out these guides:",-1),tn=s("ol",null,[s("li",null,[s("a",{href:"https://bedrock.dev/r/Entity%20Events",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev Entity Events"),e(" documentation - this one is written in a tutorial form")]),s("li",null,[e("Other documentations related with animations: "),s("a",{href:"https://bedrock.dev/r/MoLang",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev/r/MoLang"),e(", "),s("a",{href:"https://bedrock.dev/r/Animations",target:"_blank",rel:"noopener noreferrer"},"bedrock.dev/r/Animations"),e(".")]),s("li",null,[s("a",{href:"/tutorials/entity-commands.html"},"SirLich's Entity Commands Tutorial")])],-1),on=s("hr",null,null,-1),ln=s("h1",{id:"your-progress-so-far"},[s("a",{class:"header-anchor",href:"#your-progress-so-far","aria-hidden":"true"},"#"),e(" Your progress so far")],-1),rn=s("p",null,[s("strong",null,"What you've done:")],-1),pn=s("ul",null,[s("li",null,"Learned to use client Animation Controllers"),s("li",null,"Added an attack animation and AI to your custom entity"),s("li",null,"Learned to execute commands through server-side animations and animation controllers")],-1),cn=s("p",null,[s("strong",null,"What are you to do next:")],-1),un=s("ul",null,[s("li",null,"Create custom sounds"),s("li",null,"Add particles to animations"),s("li",null,"Potentially create custom particles")],-1);o.render=function(s,e,t,o,mn,kn){return n(),a("div",null,[l,r,i,p,c,u,m,k,b,h,d,y,f,g,v,_,w,A,j,x,B,T,E,P,q,C,F,I,R,L,M,N,Y,D,H,W,K,S,O,G,J,U,V,z,Q,X,Z,$,nn,an,sn,en,tn,on,ln,rn,pn,cn,un])};export default o;export{t as __pageData};
